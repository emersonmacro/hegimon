(this.webpackJsonphegimon=this.webpackJsonphegimon||[]).push([[0],{183:function(e,t,c){},188:function(e,t,c){},199:function(e,t,c){},304:function(e,t,c){},305:function(e,t,c){},306:function(e,t,c){},307:function(e,t,c){"use strict";c.r(t);var a,s=c(1),n=c.n(s),r=c(51),i=c.n(r),l=(c(181),c(47)),j=c.n(l),o=c(69),d=c(30),b=c(328),h=c(329),x=c(321),O=c(322),u=(c(183),c(28)),m=c(162),p=c(112),f=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),g=function(e){var t=new Date(1e3*e);return"".concat(t.getMonth()+1,"/").concat(t.getDate(),"/").concat(t.getFullYear())},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(p.gql)(a||(a=Object(m.a)(["\n  query GetOptions {\n    options(first: 100, skip: ",', where: { status: "ACTIVE" }) {\n      id\n      account\n      symbol\n      status\n      strike\n      amount\n      lockedAmount\n      timestamp\n      block\n      period\n      expiration\n      type\n      premium\n      settlementFee\n      totalFee\n      exercise_timestamp\n      exercise_tx\n      profit\n      impliedVolatility\n    }\n  }\n'])),e)},y=function(){var e=Object(o.a)(j.a.mark((function e(){var t,c,a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],c=0,a=0;case 3:if(!(a<100)){e.next=14;break}return e.next=6,Object(p.request)("https://api.thegraph.com/subgraphs/name/ppunky/hegic-v888",N(c));case 6:if(s=e.sent,t=[].concat(Object(u.a)(t),Object(u.a)(s.options)),!(s.options.length<100)){e.next=10;break}return e.abrupt("break",14);case 10:c+=100;case 11:a++,e.next=3;break;case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(o.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.coingecko.com/api/v3/simple/price?ids=ethereum,wrapped-bitcoin&vs_currencies=usd");case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e,t){return null===t?[]:e.map((function(e){e._periodInDays=e.period/86400;var c=Math.floor(Date.now()/1e3);e._remainingDays=(e.expiration-c)/86400;var a="ETH"===e.symbol?t.ethereum.usd:t["wrapped-bitcoin"].usd;return"CALL"===e.type?e._moneyness=a>parseFloat(e.strike)?"ITM":"OTM":e._moneyness=a<parseFloat(e.strike)?"ITM":"OTM",e}))},M=function(e){var t=e.filter((function(e){return"PUT"===e.type})),c=e.filter((function(e){return"CALL"===e.type})),a=t.length/c.length,s=Math.round(100*(a+Number.EPSILON))/100,n=e.filter((function(e){return"ITM"===e._moneyness})),r=e.filter((function(e){return"OTM"===e._moneyness})),i=e.reduce((function(e,t){return parseFloat(t.amount)*parseFloat(t.strike)+e}),0);return{total:e.length,puts:t.length,calls:c.length,pcRatio:s,itm:n.length,otm:r.length,notional:f.format(i)}},C=c(338),A=c(315),w=c(316),T=c(317),L=c(318),S=(c(188),c(2)),F=function(e){var t=e.isOpen,c=e.toggleModal;return Object(S.jsxs)(C.a,{fade:!1,isOpen:t,toggle:c,children:[Object(S.jsx)(A.a,{className:"modal-section",children:"About Hegimon"}),Object(S.jsxs)(w.a,{className:"modal-section",children:[Object(S.jsx)("p",{children:"Hegimon is a data visualization tool for active option contracts on the Hegic v888 protocol."}),Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:"Light dots represent call options"}),Object(S.jsx)("li",{children:"Dark dots represent put options"}),Object(S.jsx)("li",{children:"Click on a dot to see details for that contract"}),Object(S.jsx)("li",{children:"Notional = Strike * Amount"})]}),Object(S.jsx)("br",{}),Object(S.jsxs)("p",{className:"text-center",children:["Powered by ",Object(S.jsx)("a",{href:"https://www.hegic.co",target:"_BLANK",rel:"noreferrer",children:"Hegic"}),", ",Object(S.jsx)("a",{href:"https://www.coingecko.com/en/api",target:"_BLANK",rel:"noreferrer",children:"CoinGecko"}),", and ",Object(S.jsx)("a",{href:"https://thegraph.com",target:"_BLANK",rel:"noreferrer",children:"Graph Protocol"})]}),Object(S.jsxs)("p",{className:"text-center",children:["Made by ",Object(S.jsx)("a",{href:"https://twitter.com/EmersonMacro",target:"_BLANK",rel:"noreferrer",children:"@EmersonMacro"})]}),Object(S.jsx)("p",{className:"text-center",children:Object(S.jsx)("a",{href:"https://github.com/emersonmacro/hegimon",target:"_BLANK",rel:"noreferrer",children:"Source on Github"})})]}),Object(S.jsx)(T.a,{className:"modal-section",children:Object(S.jsx)(L.a,{outline:!0,size:"sm",color:"secondary",onClick:function(){return c()},children:"Close"})})]})},E=c(320),D=(c(199),c(333)),_=c(337),I=c(340),B=c(330),P=c(342),H=c(334),z="#7C858F",W="#263136",K="#509BC2",R="#3C738F",G="#7EBF8D",U="#5E8D69",V="#BAD9E9",q="#007bff",J="#28a745",Y=function(e){var t=e.asset,c=e.data,a=e.setActiveId,s=e.currentPrice;if(0===c.length)return Object(S.jsx)("div",{children:"No results found"});var n=c.map((function(e){return{x:parseFloat(e.strike),y:parseFloat(e.amount),id:e.id,type:e.type}})),r=[Math.min.apply(Math,Object(u.a)(c.map((function(e){return parseFloat(e.strike)})))),Math.max.apply(Math,Object(u.a)(c.map((function(e){return parseFloat(e.strike)}))))],i=[Math.min.apply(Math,Object(u.a)(c.map((function(e){return parseFloat(e.amount)})))),Math.max.apply(Math,Object(u.a)(c.map((function(e){return parseFloat(e.amount)}))))],l={axis:{stroke:z},tickLabels:{fill:z,fontSize:10},axisLabel:{fill:z,fontSize:12,padding:30,fontFamily:"Courier"},ticks:{stroke:z,strokeWidth:4,strokeOpacity:.6}};return Object(S.jsxs)(D.a,{domain:{x:r,y:i},style:{background:{fill:W}},padding:{top:5,bottom:50,left:40,right:40},containerComponent:Object(S.jsx)(_.a,{}),children:[Object(S.jsx)(I.a,{dependentAxis:!0,label:"Size",style:l}),Object(S.jsx)(I.a,{label:"Strike",style:l}),Object(S.jsx)(B.a,{style:{data:{stroke:"ETH"===t?q:J,strokeWidth:.5}},x:function(){return s},labels:function(){return"Current Price: ".concat(s?f.format(s):"")},labelComponent:Object(S.jsx)(P.a,{style:{fontSize:10}})}),Object(S.jsx)(H.a,{name:"active-options",style:{data:{fill:function(e){var c=e.datum;return"ETH"===t?"CALL"===c.type?K:R:"CALL"===c.type?G:U},stroke:V,strokeWidth:.5,fillOpacity:.85}},size:3,data:n,events:[{target:"data",eventHandlers:{onClick:function(){return[{target:"data",mutation:function(e){a(e.datum.id)}}]},onMouseOver:function(){return[{target:"data",mutation:function(e){return{style:{fill:function(e){var c=e.datum;return"ETH"===t?"CALL"===c.type?K:R:"CALL"===c.type?G:U},stroke:"white",strokeWidth:.8,fillOpacity:.65}}}}]},onMouseOut:function(){return[{target:"data",mutation:function(e){return{style:{fill:function(e){var c=e.datum;return"ETH"===t?"CALL"===c.type?K:R:"CALL"===c.type?G:U},stroke:V,strokeWidth:.5,fillOpacity:.85}}}}]}}}]})]})},Q=function(e){var t=e.asset,c=e.data,a=e.setActiveId,s=e.currentPrice,n=M(c);return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"chart-container",children:Object(S.jsx)(Y,{asset:t,data:c,setActiveId:a,currentPrice:s})}),Object(S.jsx)(E.a,{color:"ETH"===t?"primary":"success",className:"asset-alert",children:Object(S.jsx)("h5",{className:"text-center asset-header",children:t})}),Object(S.jsxs)(x.a,{className:"stat-row",children:[Object(S.jsx)(O.a,{children:"Active Contracts"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:n.total})})]}),Object(S.jsxs)(x.a,{className:"stat-row",children:[Object(S.jsx)(O.a,{children:"Puts"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:n.puts})})]}),Object(S.jsxs)(x.a,{className:"stat-row",children:[Object(S.jsx)(O.a,{children:"Calls"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:n.calls})})]}),Object(S.jsxs)(x.a,{className:"stat-row",children:[Object(S.jsx)(O.a,{children:"Put/Call Ratio"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:n.pcRatio})})]}),Object(S.jsxs)(x.a,{className:"stat-row",children:[Object(S.jsx)(O.a,{children:"ITM / OTM"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsxs)("b",{children:[n.itm," / ",n.otm]})})]}),Object(S.jsxs)(x.a,{className:"stat-row",children:[Object(S.jsx)(O.a,{children:"Total Notional"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:n.notional})})]})]})},X=(c(304),function(e){var t,c=e.option,a=e.isOpen,s=e.toggleModal;if(!c)return null;var n=parseFloat(c.amount)*parseFloat(c.strike),r="https://etherscan.io/address/".concat(c.account),i="https://etherscan.io/block/".concat(c.block);return Object(S.jsxs)(C.a,{fade:!1,isOpen:a,toggle:s,children:[Object(S.jsx)(A.a,{className:"modal-section",children:c.id}),Object(S.jsxs)(w.a,{className:"modal-section",children:[Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"ID"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:c.id})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Underlying"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:c.symbol})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Type"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:c.type})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Amount"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:c.amount})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Strike"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:f.format(parseFloat(c.strike))})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Notional"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:f.format(n)})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Moneyness"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:c._moneyness})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Timestamp"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:g(c.timestamp)})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Expiration"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:g(c.expiration)})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Duration"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:c._periodInDays})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Days until Expiration"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:null===(t=c._remainingDays)||void 0===t?void 0:t.toFixed(2)})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Premium"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:c.premium})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Settlement Fee"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:c.settlementFee})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Total Fee"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:c.totalFee})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Account"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("a",{href:r,target:"_BLANK",rel:"noreferrer",className:"link",children:Object(S.jsx)("b",{children:c.account})})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Block"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("a",{href:i,target:"_BLANK",rel:"noreferrer",children:Object(S.jsx)("b",{children:c.block})})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Locked Amount"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:c.lockedAmount})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Implied Volatility"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:c.impliedVolatility})})]}),Object(S.jsxs)(x.a,{children:[Object(S.jsx)(O.a,{children:"Status"}),Object(S.jsx)(O.a,{className:"text-right",children:Object(S.jsx)("b",{children:c.status})})]})]}),Object(S.jsx)(T.a,{className:"modal-section",children:Object(S.jsx)(L.a,{outline:!0,size:"sm",color:"secondary",onClick:function(){return s()},children:"Close"})})]})}),Z=c(323),$=c(324),ee=c(325),te=c(326),ce=(c(305),function(e){var t=e.toggleStatsModal,c=e.toggleAboutModal;return Object(S.jsxs)(Z.a,{className:"app-navbar",children:[Object(S.jsx)("span",{className:"app-brand",children:"Hegimon"}),Object(S.jsxs)($.a,{children:[Object(S.jsx)(ee.a,{children:Object(S.jsx)(te.a,{className:"app-nav-link",onClick:function(){return t()},children:"Total Stats"})}),Object(S.jsx)(ee.a,{className:"spacer",children:Object(S.jsx)(te.a,{className:"app-nav-link",onClick:function(){return c()},children:"?"})})]})]})}),ae=c(327),se=(c(306),function(e){var t=e.ethData,c=e.wbtcData,a=e.isOpen,s=e.toggleModal,n=M(t),r=M(c),i=M([].concat(Object(u.a)(t),Object(u.a)(c)));return Object(S.jsxs)(C.a,{size:"lg",fade:!1,isOpen:a,toggle:s,children:[Object(S.jsx)(A.a,{className:"modal-section",children:"Total Stats"}),Object(S.jsx)(w.a,{className:"modal-section",children:Object(S.jsxs)(ae.a,{borderless:!0,children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{className:"table-text"}),Object(S.jsx)("th",{className:"table-text text-right",children:"ETH"}),Object(S.jsx)("th",{className:"table-text text-right",children:"WBTC"}),Object(S.jsx)("th",{className:"table-text text-right",children:"Total"})]})}),Object(S.jsxs)("tbody",{children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{className:"table-text",children:"Active Contracts"}),Object(S.jsx)("td",{className:"table-text text-right",children:n.total}),Object(S.jsx)("td",{className:"table-text text-right",children:r.total}),Object(S.jsx)("td",{className:"table-text text-right",children:i.total})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{className:"table-text",children:"Puts"}),Object(S.jsx)("td",{className:"table-text text-right",children:n.puts}),Object(S.jsx)("td",{className:"table-text text-right",children:r.puts}),Object(S.jsx)("td",{className:"table-text text-right",children:i.puts})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{className:"table-text",children:"Calls"}),Object(S.jsx)("td",{className:"table-text text-right",children:n.calls}),Object(S.jsx)("td",{className:"table-text text-right",children:r.calls}),Object(S.jsx)("td",{className:"table-text text-right",children:i.calls})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{className:"table-text",children:"Put/Call Ratio"}),Object(S.jsx)("td",{className:"table-text text-right",children:n.pcRatio}),Object(S.jsx)("td",{className:"table-text text-right",children:r.pcRatio}),Object(S.jsx)("td",{className:"table-text text-right",children:i.pcRatio})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{className:"table-text",children:"ITM / OTM"}),Object(S.jsxs)("td",{className:"table-text text-right",children:[n.itm," / ",n.otm]}),Object(S.jsxs)("td",{className:"table-text text-right",children:[r.itm," / ",r.otm]}),Object(S.jsxs)("td",{className:"table-text text-right",children:[i.itm," / ",i.otm]})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{className:"table-text",children:"Total Notional"}),Object(S.jsx)("td",{className:"table-text text-right",children:n.notional}),Object(S.jsx)("td",{className:"table-text text-right",children:r.notional}),Object(S.jsx)("td",{className:"table-text text-right",children:i.notional})]})]})]})}),Object(S.jsx)(T.a,{className:"modal-section",children:Object(S.jsx)(L.a,{outline:!0,size:"sm",color:"secondary",onClick:function(){return s()},children:"Close"})})]})}),ne=function(){var e=Object(s.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],n=Object(s.useState)([]),r=Object(d.a)(n,2),i=r[0],l=r[1],u=Object(s.useState)(null),m=Object(d.a)(u,2),p=m[0],f=m[1],g=Object(s.useState)(null),N=Object(d.a)(g,2),M=N[0],C=N[1],A=Object(s.useState)(!1),w=Object(d.a)(A,2),T=w[0],L=w[1],E=Object(s.useState)(null),D=Object(d.a)(E,2),_=D[0],I=D[1],B=Object(s.useState)(!1),P=Object(d.a)(B,2),H=P[0],z=P[1],W=Object(s.useState)(!1),K=Object(d.a)(W,2),R=K[0],G=K[1],U=Object(s.useState)(!0),V=Object(d.a)(U,2),q=V[0],J=V[1],Y=Object(s.useState)(!1),Z=Object(d.a)(Y,2),$=Z[0],ee=Z[1],te=function(){I(null),L(!1)},ae=function(){return z(!H)},ne=function(){return G(!R)};return Object(s.useEffect)((function(){function e(){return(e=Object(o.a)(j.a.mark((function e(){var t,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y();case 3:return t=e.sent,e.next=6,k();case 6:c=e.sent,s=v(t,c),a(s.filter((function(e){return"ETH"===e.symbol}))),l(s.filter((function(e){return"WBTC"===e.symbol}))),C(c),J(!1),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),J(!1),ee(!0);case 19:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(s.useEffect)((function(){Boolean(p)?function(e){I(e),L(!0)}(function(e,t,c){var a=t.find((function(t){return t.id===e}));return Boolean(a)?a:c.find((function(t){return t.id===e}))}(p,c,i)):te()}),[p,c,i]),Object(S.jsxs)("div",{children:[Object(S.jsx)(ce,{toggleStatsModal:ae,toggleAboutModal:ne}),Object(S.jsxs)(b.a,{fluid:!0,children:[q&&Object(S.jsx)("div",{className:"d-flex justify-content-center align-self-center spinner-spacing",children:Object(S.jsx)(h.a,{color:"primary"})}),!q&&$&&Object(S.jsx)("h4",{className:"text-center spinner-spacing",children:"Error loading data. Please try again."}),!q&&!$&&Object(S.jsxs)(x.a,{className:"top-row",children:[Object(S.jsx)(O.a,{children:Object(S.jsx)(Q,{asset:"ETH",data:c,setActiveId:f,currentPrice:null===M||void 0===M?void 0:M.ethereum.usd})}),Object(S.jsx)(O.a,{children:Object(S.jsx)(Q,{asset:"WBTC",data:i,setActiveId:f,currentPrice:null===M||void 0===M?void 0:M["wrapped-bitcoin"].usd})})]})]}),Object(S.jsx)(X,{option:_,isOpen:T,toggleModal:te}),Object(S.jsx)(se,{ethData:c,wbtcData:i,isOpen:H,toggleModal:ae}),Object(S.jsx)(F,{isOpen:R,toggleModal:ne})]})};i.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(ne,{})}),document.getElementById("root"))}},[[307,1,2]]]);
//# sourceMappingURL=main.6e334732.chunk.js.map